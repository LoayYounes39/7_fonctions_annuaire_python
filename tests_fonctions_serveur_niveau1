from fonctions_serveur_niveau1 import *
from fonctions_serveur_niveau2 import *

def test_create_user(): 

    assert CREATE_USER(
    PDU_Requete(
        action="CREATE_USER",
        data={
            "username": "Loay",
            "password": "Loay123456",
            "role": "client"
        },
        token = "USER_TOKEN"
    )
    ) == pdu_403("USER_TOKEN", "administrateur requis")

    assert CREATE_USER(
    PDU_Requete(
        action="CREATE_USER",
        data={
            "username": "Loay",
            "password": "Loay123456",
            "role": ""
        },
        token = "ADMIN_TOKEN"
    )
    ) == pdu_400("ADMIN_TOKEN")

    pdu_create = CREATE_USER( PDU_Requete(
        action="CREATE_USER",
        data={
            "username": "Loay",
            "password": "Loay123456",
            "role": "administrateur"
        },
        token = "ADMIN_TOKEN"
    ) )
    assert pdu_create == pdu_201("ADMIN_TOKEN", "utilisateur ajouté par succès") 

    assert CREATE_USER(
    PDU_Requete(
        action="CREATE_USER",
        data={
            "username": "Loay",
            "password": "Loay123456",
            "role": "administrateur"
        },
        token = "ADMIN_TOKEN"
    )
    ) == pdu_409("ADMIN_TOKEN", "utilisateur déjà existant")

def test_add_contact():

    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "Loay",
            "nom": "Talley",
            "prenom": "Emma",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": "emmatalley2016@gmail.com"
        },
        token = ""
    )
    ) == pdu_401("") 

    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "Loay",
            "nom": "",
            "prenom": "",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": ""
        },
        token = "USER_TOKEN"
    )
    ) == pdu_400("USER_TOKEN") 

    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "Loay",
            "nom": "",
            "prenom": "",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": "emmatalley@2016.com"
        },
        token = "USER_TOKEN"
    )
    ) == pdu_400("USER_TOKEN")

    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "K",
            "nom": "Talley",
            "prenom": "Emma",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": "emmatalley@2016.com"
        },
        token = "USER_TOKEN"
    )
    ) == pdu_403("USER_TOKEN", " Tu n'as pas accès à K")
    """
    
    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "E",
            "nom": "Talley",
            "prenom": "Emma",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": "emmatalley@2016.com"
        },
        token = "USER_TOKEN"
    )
    ) == pdu_201("USER_TOKEN", "contact ajouté par succès")

    assert ADD_CONTACT(
    PDU_Requete(
        action="ADD_CONTACT",
        data={
            "nomAnnuaire": "E",
            "nom": "Talley",
            "prenom": "Emma",
            "numTel": "+1 213 555-0123",
            "adressePostal": "obs2016",
            "adresseMail": "emmatalley@2016.com"
        },
        token = "USER_TOKEN"
    )
    ) == pdu_409("USER_TOKEN", "contact déjà existant")
 """
if __name__ == "__main__":

    print("test_create_user")
    #test_create_user()
    print("Test OK")
    print("test_add_contact")
    test_add_contact()
    print("Test OK")



